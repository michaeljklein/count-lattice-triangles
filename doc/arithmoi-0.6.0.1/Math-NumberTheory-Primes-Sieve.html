<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Math.NumberTheory.Primes.Sieve</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Math.NumberTheory.Primes.Sieve.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">arithmoi-0.6.0.1: Efficient basic number-theoretic functions.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2011 Daniel Fischer</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>Daniel Fischer &lt;daniel.is.fischer@googlemail.com&gt;</td></tr><tr><th>Stability</th><td>Provisional</td></tr><tr><th>Portability</th><td>Non-portable (GHC extensions)</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Math.NumberTheory.Primes.Sieve</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Limitations</a></li><li><a href="#g:2">Sieves and lists</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Prime generation using a sieve.
 Currently, an enhanced sieve of Eratosthenes is used, switching to an
 Atkin sieve is planned (if I get around to implementing it and it's not slower).</p><p>The sieve used is segmented, with a chunk size chosen to give good (enough)
 cache locality while still getting something substantial done per chunk.
 However, that means we must store data for primes up to the square root of
 where sieving is done, thus sieving primes up to <code>n</code> requires
 <code><em>O</em>(sqrt n/log n)</code> space.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:primes">primes</a> :: [<a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a>]</li><li class="src short"><a href="#v:sieveFrom">sieveFrom</a> :: <a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a> -&gt; [<a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:PrimeSieve">PrimeSieve</a></li><li class="src short"><a href="#v:primeSieve">primeSieve</a> :: <a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a></li><li class="src short"><a href="#v:psieveList">psieveList</a> :: [<a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a>]</li><li class="src short"><a href="#v:psieveFrom">psieveFrom</a> :: <a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a> -&gt; [<a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a>]</li><li class="src short"><a href="#v:primeList">primeList</a> :: <a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a> -&gt; [<a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a>]</li></ul></div><div id="interface"><h1 id="g:1">Limitations</h1><div class="doc"><p>There are three factors limiting the range of these sieves.</p><ol><li>Memory</li><li>Overflow</li><li>The internal representation of the state</li></ol><p>An Eratosthenes type sieve needs to store the primes up to the square root of
 the currently sieved region, thus requires <code><em>O</em>(sqrt n/log n)</code> space.We store <code>16</code> bytes
 of information per prime, thus a Gigabyte of memory takes you to about <code>1.6*10^18</code>.
 The <code>log</code> doesn't change much in that range, so as a first approximation, doubling
 the storage increases the sieve range by a factor of four.</p><p>On a 64-bit system, this is (currently) the only limitation to be concerned with, but
 with more than four Terabyte of memory, the fact that the internal representation
 currently limits the sieve range to about <code>6.8*10^25</code> could become relevant.
 Overflow in array indexing doesn't become a concern before memory and internal
 representation would allow to sieve past <code>10^37</code>.</p><p>On a 32-bit system, the internal representation imposes no additional limits,
 but overflow has to be reckoned with. On the one hand, the fact that arrays are
 <code><a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></code>-indexed restricts the size of the prime store, on the other hand, overflow
 in calculating the indices to cross off multiples is possible before running out
 of memory. The former limits the upper bound of the monolithic <code><a href="Math-NumberTheory-Primes-Sieve.html#v:primeSieve">primeSieve</a></code> to
 shortly above <code>8*10^9</code>, the latter limits the range of the segmented sieves to
 about <code>1.7*10^18</code>.</p></div><h1 id="g:2">Sieves and lists</h1><div class="top"><p class="src"><a id="v:primes" class="def">primes</a> :: [<a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a>] <a href="src/Math.NumberTheory.Primes.Sieve.Eratosthenes.html#primes" class="link">Source</a> <a href="#v:primes" class="selflink">#</a></p><div class="doc"><p>List of primes.
   Since the sieve uses unboxed arrays, overflow occurs at some point.
   On 64-bit systems, that point is beyond the memory limits, on
   32-bit systems, it is at about <code>1.7*10^18</code>.</p></div></div><div class="top"><p class="src"><a id="v:sieveFrom" class="def">sieveFrom</a> :: <a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a> -&gt; [<a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a>] <a href="src/Math.NumberTheory.Primes.Sieve.Eratosthenes.html#sieveFrom" class="link">Source</a> <a href="#v:sieveFrom" class="selflink">#</a></p><div class="doc"><p><code><code><a href="Math-NumberTheory-Primes-Sieve.html#v:sieveFrom">sieveFrom</a></code> n</code> creates the list of primes not less than <code>n</code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PrimeSieve" class="def">PrimeSieve</a> <a href="src/Math.NumberTheory.Primes.Sieve.Eratosthenes.html#PrimeSieve" class="link">Source</a> <a href="#t:PrimeSieve" class="selflink">#</a></p><div class="doc"><p>Compact store of primality flags.</p></div></div><div class="top"><p class="src"><a id="v:primeSieve" class="def">primeSieve</a> :: <a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a> <a href="src/Math.NumberTheory.Primes.Sieve.Eratosthenes.html#primeSieve" class="link">Source</a> <a href="#v:primeSieve" class="selflink">#</a></p><div class="doc"><p>Sieve primes up to (and including) a bound (or 7, if bound is smaller).
   For small enough bounds, this is more efficient than
   using the segmented sieve.</p><p>Since arrays are <code><a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></code>-indexed, overflow occurs when the sieve
   size comes near <code><code><a href="../base-4.10.1.0/Prelude.html#v:maxBound">maxBound</a></code> :: <code><a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></code></code>, that corresponds to an
   upper bound near <code>15/8*<code><a href="../base-4.10.1.0/Prelude.html#v:maxBound">maxBound</a></code></code>. On <code>32</code>-bit systems, that
   is often within memory limits, so don't give bounds larger than
   <code>8*10^9</code> there.</p></div></div><div class="top"><p class="src"><a id="v:psieveList" class="def">psieveList</a> :: [<a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a>] <a href="src/Math.NumberTheory.Primes.Sieve.Eratosthenes.html#psieveList" class="link">Source</a> <a href="#v:psieveList" class="selflink">#</a></p><div class="doc"><p>List of primes in the form of a list of <code><a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a></code>s, more compact than
   <code><a href="Math-NumberTheory-Primes-Sieve.html#v:primes">primes</a></code>, thus it may be better to use <code><code><a href="Math-NumberTheory-Primes-Sieve.html#v:psieveList">psieveList</a></code> &gt;&gt;= <code><a href="Math-NumberTheory-Primes-Sieve.html#v:primeList">primeList</a></code></code>
   than keeping the list of primes alive during the entire run.</p></div></div><div class="top"><p class="src"><a id="v:psieveFrom" class="def">psieveFrom</a> :: <a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a> -&gt; [<a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a>] <a href="src/Math.NumberTheory.Primes.Sieve.Eratosthenes.html#psieveFrom" class="link">Source</a> <a href="#v:psieveFrom" class="selflink">#</a></p><div class="doc"><p><code><code><a href="Math-NumberTheory-Primes-Sieve.html#v:psieveFrom">psieveFrom</a></code> n</code> creates the list of <code><a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a></code>s starting roughly
   at <code>n</code>. Due to the organisation of the sieve, the list may contain
   a few primes less than <code>n</code>.
   This form uses less memory than <code>[<code><a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a></code>]</code>, hence it may be preferable
   to use this if it is to be reused.</p></div></div><div class="top"><p class="src"><a id="v:primeList" class="def">primeList</a> :: <a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a> -&gt; [<a href="../base-4.10.1.0/Prelude.html#t:Integer">Integer</a>] <a href="src/Math.NumberTheory.Primes.Sieve.Eratosthenes.html#primeList" class="link">Source</a> <a href="#v:primeList" class="selflink">#</a></p><div class="doc"><p>Generate a list of primes for consumption from a
   <code><a href="Math-NumberTheory-Primes-Sieve.html#t:PrimeSieve">PrimeSieve</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>